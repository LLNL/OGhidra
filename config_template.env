# ============================================================
# OGhidra Bridge Configuration Template
# ============================================================
# Copy this file to .env and customize as needed:
#   cp config_template.env .env
#
# Then edit .env with your preferred settings
# ============================================================

# ============================================================
# EXECUTION LOOP CONFIGURATION ‚öôÔ∏è
# ============================================================

# INNER LOOP: Tool executions per investigation
# Enable multi-tool execution loop for comprehensive investigations
# Set to 'false' to revert to legacy single-shot execution
EXECUTION_LOOP_ENABLED=true

# Maximum number of tool executions per execution phase (1-50)
# 
# Quick:      5 steps  (~25 seconds)
# Balanced:   10 steps (~50 seconds) ‚≠ê DEFAULT
# Deep:       20 steps (~2 minutes)
# Maximum:    50 steps (~5 minutes)
MAX_EXECUTION_STEPS=10

# ============================================================
# AGENTIC LOOP CONFIGURATION üîÑ (NEW!)
# ============================================================

# OUTER LOOP: Full Planning‚ÜíExecution‚ÜíAnalysis cycles
# Enable multi-cycle agentic loop with goal evaluation and re-planning
# Set to 'false' for single-pass mode (one cycle only)
AGENTIC_LOOP_ENABLED=true

# Maximum number of complete investigation cycles (1-10)
# Each cycle: Planning ‚Üí Execution (10 tools) ‚Üí Analysis ‚Üí Evaluation
#
# Single:     1 cycle  (~1 minute)   - No re-planning
# Balanced:   3 cycles (~3 minutes)  ‚≠ê DEFAULT - Adaptive investigation
# Deep:       5 cycles (~5 minutes)  - Thorough with multiple attempts
# Maximum:    10 cycles (~10 minutes) - Research-level completeness
MAX_AGENTIC_CYCLES=3

# ============================================================
# OLLAMA CONFIGURATION
# ============================================================

OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=gemma3:27b
OLLAMA_EMBEDDING_MODEL=all-minilm:33m
OLLAMA_TIMEOUT=120

# ============================================================
# GHIDRA MCP CONFIGURATION
# ============================================================

GHIDRA_BASE_URL=http://localhost:8080
GHIDRA_EXTENDED_URL=http://localhost:8081
GHIDRA_TIMEOUT=30
GHIDRA_MOCK_MODE=false

# ============================================================
# LLM LOGGING
# ============================================================

LLM_LOGGING_ENABLED=true
LLM_LOG_FILE=logs/llm_interactions.log
LLM_LOG_FORMAT=json
LLM_LOG_PROMPTS=true
LLM_LOG_RESPONSES=true
LLM_LOG_TOKENS=true
LLM_LOG_TIMING=true

# ============================================================
# GENERAL CONFIGURATION
# ============================================================

LOG_LEVEL=INFO
LOG_FILE=bridge.log
LOG_CONSOLE=true
LOG_FILE_ENABLED=true
CONTEXT_LIMIT=25

# ============================================================
# CAG (Context-Augmented Generation)
# ============================================================

CAG_ENABLED=true
CAG_KNOWLEDGE_CACHE_ENABLED=true
CAG_SESSION_CACHE_ENABLED=true
CAG_TOKEN_LIMIT=2000
ENABLE_KNOWLEDGE_BASE=true
KNOWLEDGE_BASE_DIR=knowledge_base
ENABLE_REVIEW=true

# ============================================================
# SESSION HISTORY
# ============================================================

SESSION_HISTORY_ENABLED=true
SESSION_HISTORY_STORAGE_PATH=data/ollama_ghidra_session_history.jsonl
SESSION_HISTORY_MAX_SESSIONS=1000
SESSION_HISTORY_AUTO_SUMMARIZE=true
SESSION_HISTORY_USE_VECTOR_EMBEDDINGS=false
SESSION_HISTORY_VECTOR_DB_PATH=data/vector_db

# ============================================================
# PERFORMANCE PRESETS
# ============================================================
# Uncomment one preset or customize individual values above

# --- QUICK MODE (Fast, Shallow) ---
# MAX_EXECUTION_STEPS=5
# OLLAMA_TIMEOUT=60

# --- BALANCED MODE (Default) ‚≠ê ---
# MAX_EXECUTION_STEPS=10
# OLLAMA_TIMEOUT=120

# --- DEEP MODE (Thorough) ---
# MAX_EXECUTION_STEPS=20
# OLLAMA_TIMEOUT=180

# --- MAXIMUM MODE (Research-level) ---
# MAX_EXECUTION_STEPS=50
# OLLAMA_TIMEOUT=300

